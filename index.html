<!DOCTYPE html>
<html>
    <head>
        <script src="nes.js"></script>
        <script src="megaman2.js"></script>
        <script src="arp.js"></script>
        <script src="mixing-test.js"></script>
        <script src="kk.js"></script>
    </head>
    <body>
        <button id="megaman">Megaman</button></br>
        <button id="kk">Kart Kingdom</button>
        <button id="noise">Noise Sweep</button>
        <button id="stop">Stop</button>
<script>
var playerFor = function(songName) {
    return function() {
        NES.Sequencer.stop();
        NES.Sequencer.play(window[songName].melody);
    };
};

var A = function(id, song) {
    var playSong = playerFor(song);
    document.getElementById(id).addEventListener('click', playSong);
};

window.Noise = {
    melody: {
        NOISE: NES.Mml.mmlToMelody(`
          t120
          l8
          
          o1 c
          o2 c
          o3 c
          o4 c
          o6 c
          o7 c
          o8 c
          o9 c
        `)
    }
};

A('megaman', 'Megaman2');
A('kk', 'KK');
A('noise', 'Noise');
document.getElementById('stop').addEventListener('click', NES.Sequencer.stop.bind(NES.Sequencer));
document.addEventListener('click', () => NES.Oscillators.context.resume());
        </script>
    </body>
</html>
